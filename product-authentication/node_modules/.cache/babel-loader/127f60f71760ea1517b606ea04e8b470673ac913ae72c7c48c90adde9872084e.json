{"ast":null,"code":"import React,{useState,useEffect}from'react';import web3 from'../SC/web3';import contract from'../SC/contract.js';import'../css_files/userPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UserPage=()=>{const[userAddress,setUserAddress]=useState('');const[productId,setProductId]=useState('');const[productInfo,setProductInfo]=useState(null);const[verificationAttempted,setVerificationAttempted]=useState(false);useEffect(()=>{const fetchAccount=async()=>{const accounts=await web3.eth.getAccounts();if(accounts.length>0){setUserAddress(accounts[0]);}};fetchAccount();},[]);const verifyProduct=async()=>{setVerificationAttempted(true);try{const result=await contract.methods.checkAuthenticity(productId).call();if(result&&result.__length__===4&&result[0]!==''){setProductInfo({name:result[0],description:result[1],serialNumber:result[2],manufactureDate:result[3]});}else{setProductInfo(null);}}catch(error){console.error(error);setProductInfo(null);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Dashboard\"}),userAddress&&/*#__PURE__*/_jsxs(\"p\",{className:\"welcome-message\",children:[\"Connected as: \",userAddress]}),/*#__PURE__*/_jsx(\"p\",{className:\"prompt-text\",children:\"Please enter your serial number to check the authenticity of your product:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-field\",type:\"text\",value:productId,onChange:e=>setProductId(e.target.value),placeholder:\"Serial Number\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:verifyProduct,children:\"Verify Product\"}),verificationAttempted&&productInfo&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"verification-message\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Your Product is Real, Here are its information:\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"product-info\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",productInfo.name]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",productInfo.description]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Serial Number:\"}),\" \",productInfo.serialNumber]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Manufacture Date:\"}),\" \",productInfo.manufactureDate]})]})]}),verificationAttempted&&!productInfo&&/*#__PURE__*/_jsx(\"p\",{className:\"result-text\",children:\"Your Product is Fake\"})]})]});};export default UserPage;","map":{"version":3,"names":["React","useState","useEffect","web3","contract","jsx","_jsx","jsxs","_jsxs","UserPage","userAddress","setUserAddress","productId","setProductId","productInfo","setProductInfo","verificationAttempted","setVerificationAttempted","fetchAccount","accounts","eth","getAccounts","length","verifyProduct","result","methods","checkAuthenticity","call","__length__","name","description","serialNumber","manufactureDate","error","console","className","children","type","value","onChange","e","target","placeholder","onClick"],"sources":["C:/Users/allen/Blockchain/product-authentication/src/components/userPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport web3 from '../SC/web3';\r\nimport contract from '../SC/contract.js';\r\nimport '../css_files/userPage.css';\r\n\r\nconst UserPage = () => {\r\n  const [userAddress, setUserAddress] = useState('');\r\n  const [productId, setProductId] = useState('');\r\n  const [productInfo, setProductInfo] = useState(null);\r\n  const [verificationAttempted, setVerificationAttempted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchAccount = async () => {\r\n      const accounts = await web3.eth.getAccounts();\r\n      if (accounts.length > 0) {\r\n        setUserAddress(accounts[0]);\r\n      }\r\n    };\r\n\r\n    fetchAccount();\r\n  }, []);\r\n\r\n  const verifyProduct = async () => {\r\n    setVerificationAttempted(true);\r\n    try {\r\n      const result = await contract.methods.checkAuthenticity(productId).call();\r\n      if (result && result.__length__ === 4 && result[0] !== '') {\r\n        setProductInfo({\r\n          name: result[0],\r\n          description: result[1],\r\n          serialNumber: result[2],\r\n          manufactureDate: result[3]\r\n        });\r\n      } else {\r\n        setProductInfo(null); \r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setProductInfo(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"user-container\">\r\n      <h2>User Dashboard</h2>\r\n      {userAddress && <p className=\"welcome-message\">Connected as: {userAddress}</p>}\r\n      <p className=\"prompt-text\">Please enter your serial number to check the authenticity of your product:</p>\r\n      <div className=\"form-container\">\r\n        <input \r\n            className=\"input-field\"\r\n            type=\"text\"\r\n            value={productId}\r\n            onChange={(e) => setProductId(e.target.value)}\r\n            placeholder=\"Serial Number\"\r\n        />\r\n        <button className=\"button\" onClick={verifyProduct}>Verify Product</button>\r\n        {verificationAttempted && productInfo && (\r\n            <div>\r\n                <div className=\"verification-message\">\r\n                    <strong>Your Product is Real, Here are its information:</strong>\r\n                </div>\r\n                <ul className=\"product-info\">\r\n                    <li><strong>Name:</strong> {productInfo.name}</li>\r\n                    <li><strong>Description:</strong> {productInfo.description}</li>\r\n                    <li><strong>Serial Number:</strong> {productInfo.serialNumber}</li>\r\n                    <li><strong>Manufacture Date:</strong> {productInfo.manufactureDate}</li>\r\n                </ul>\r\n            </div>\r\n        )}\r\n        {verificationAttempted && !productInfo && <p className=\"result-text\">Your Product is Fake</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,IAAI,KAAM,YAAY,CAC7B,MAAO,CAAAC,QAAQ,KAAM,mBAAmB,CACxC,MAAO,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACe,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAEzEC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhB,IAAI,CAACiB,GAAG,CAACC,WAAW,CAAC,CAAC,CAC7C,GAAIF,QAAQ,CAACG,MAAM,CAAG,CAAC,CAAE,CACvBX,cAAc,CAACQ,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC7B,CACF,CAAC,CAEDD,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAK,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChCN,wBAAwB,CAAC,IAAI,CAAC,CAC9B,GAAI,CACF,KAAM,CAAAO,MAAM,CAAG,KAAM,CAAApB,QAAQ,CAACqB,OAAO,CAACC,iBAAiB,CAACd,SAAS,CAAC,CAACe,IAAI,CAAC,CAAC,CACzE,GAAIH,MAAM,EAAIA,MAAM,CAACI,UAAU,GAAK,CAAC,EAAIJ,MAAM,CAAC,CAAC,CAAC,GAAK,EAAE,CAAE,CACzDT,cAAc,CAAC,CACbc,IAAI,CAAEL,MAAM,CAAC,CAAC,CAAC,CACfM,WAAW,CAAEN,MAAM,CAAC,CAAC,CAAC,CACtBO,YAAY,CAAEP,MAAM,CAAC,CAAC,CAAC,CACvBQ,eAAe,CAAER,MAAM,CAAC,CAAC,CAC3B,CAAC,CAAC,CACJ,CAAC,IAAM,CACLT,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAE,MAAOkB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpBlB,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAC,CAED,mBACEP,KAAA,QAAK2B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B9B,IAAA,OAAA8B,QAAA,CAAI,gBAAc,CAAI,CAAC,CACtB1B,WAAW,eAAIF,KAAA,MAAG2B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAAC,gBAAc,CAAC1B,WAAW,EAAI,CAAC,cAC9EJ,IAAA,MAAG6B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,4EAA0E,CAAG,CAAC,cACzG5B,KAAA,QAAK2B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B9B,IAAA,UACI6B,SAAS,CAAC,aAAa,CACvBE,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE1B,SAAU,CACjB2B,QAAQ,CAAGC,CAAC,EAAK3B,YAAY,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC9CI,WAAW,CAAC,eAAe,CAC9B,CAAC,cACFpC,IAAA,WAAQ6B,SAAS,CAAC,QAAQ,CAACQ,OAAO,CAAEpB,aAAc,CAAAa,QAAA,CAAC,gBAAc,CAAQ,CAAC,CACzEpB,qBAAqB,EAAIF,WAAW,eACjCN,KAAA,QAAA4B,QAAA,eACI9B,IAAA,QAAK6B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,cACjC9B,IAAA,WAAA8B,QAAA,CAAQ,iDAA+C,CAAQ,CAAC,CAC/D,CAAC,cACN5B,KAAA,OAAI2B,SAAS,CAAC,cAAc,CAAAC,QAAA,eACxB5B,KAAA,OAAA4B,QAAA,eAAI9B,IAAA,WAAA8B,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAACtB,WAAW,CAACe,IAAI,EAAK,CAAC,cAClDrB,KAAA,OAAA4B,QAAA,eAAI9B,IAAA,WAAA8B,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAACtB,WAAW,CAACgB,WAAW,EAAK,CAAC,cAChEtB,KAAA,OAAA4B,QAAA,eAAI9B,IAAA,WAAA8B,QAAA,CAAQ,gBAAc,CAAQ,CAAC,IAAC,CAACtB,WAAW,CAACiB,YAAY,EAAK,CAAC,cACnEvB,KAAA,OAAA4B,QAAA,eAAI9B,IAAA,WAAA8B,QAAA,CAAQ,mBAAiB,CAAQ,CAAC,IAAC,CAACtB,WAAW,CAACkB,eAAe,EAAK,CAAC,EACzE,CAAC,EACJ,CACR,CACAhB,qBAAqB,EAAI,CAACF,WAAW,eAAIR,IAAA,MAAG6B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,sBAAoB,CAAG,CAAC,EAC1F,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3B,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}